<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=Noella><link href=https://Novel-Reader.github.io/latest/9.0-docs/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.0, mkdocs-material-8.5.7"><title>全部文档 - Genshin novel reader documents(beta)</title><link rel=stylesheet href=../../assets/stylesheets/main.20d9efc8.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#e92063><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=pink data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Genshin novel reader documents(beta)" class="md-header__button md-logo" aria-label="Genshin novel reader documents(beta)" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Genshin novel reader documents(beta) </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 全部文档 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Novel-Reader/Novel-Reader.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Novel-Reader </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Genshin novel reader documents(beta)" class="md-nav__button md-logo" aria-label="Genshin novel reader documents(beta)" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Genshin novel reader documents(beta) </label> <div class=md-nav__source> <a href=https://github.com/Novel-Reader/Novel-Reader.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Novel-Reader </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Readme </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> latest <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=latest data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> latest </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../00-introduction/ class=md-nav__link> 00-introduction </a> </li> <li class=md-nav__item> <a href=../1.0-feature/ class=md-nav__link> 1.0-feature.md </a> </li> <li class=md-nav__item> <a href=../2.0-env/ class=md-nav__link> 2.0-env.md </a> </li> <li class=md-nav__item> <a href=../2.1-frontend/ class=md-nav__link> 2.1-frontend.md </a> </li> <li class=md-nav__item> <a href=../2.2-backend/ class=md-nav__link> 2.2-backend.md </a> </li> <li class=md-nav__item> <a href=../2.3-db/ class=md-nav__link> 2.3-db.md </a> </li> <li class=md-nav__item> <a href=../2.4-test/ class=md-nav__link> 2.4-test.md </a> </li> <li class=md-nav__item> <a href=../2.5-structure/ class=md-nav__link> 2.5-structure.md </a> </li> <li class=md-nav__item> <a href=../3.1-issues/ class=md-nav__link> 3.1-issues.md </a> </li> <li class=md-nav__item> <a href=../3.2-change/ class=md-nav__link> 3.2-change.md </a> </li> <li class=md-nav__item> <a href=../3.3-api/ class=md-nav__link> 3.3-api.md </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 全部文档 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 全部文档 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#0 class=md-nav__link> 0 前言 </a> </li> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1 软件功能 </a> <nav class=md-nav aria-label="1 软件功能"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11 class=md-nav__link> 1.1 离线模式 </a> </li> <li class=md-nav__item> <a href=#12 class=md-nav__link> 1.2 在线模式 </a> </li> <li class=md-nav__item> <a href=#13 class=md-nav__link> 1.3 细节功能 </a> </li> <li class=md-nav__item> <a href=#14 class=md-nav__link> 1.4 未来功能展望 </a> <nav class=md-nav aria-label="1.4 未来功能展望"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#141 class=md-nav__link> 1.4.1 前端功能扩展 </a> </li> <li class=md-nav__item> <a href=#142 class=md-nav__link> 1.4.2 后端功能扩展 </a> </li> <li class=md-nav__item> <a href=#143 class=md-nav__link> 1.4.3 产品功能调研 </a> </li> <li class=md-nav__item> <a href=#144 class=md-nav__link> 1.4.4 大数据和推荐功能扩展 </a> </li> <li class=md-nav__item> <a href=#145 class=md-nav__link> 1.4.5 用户调研和反馈 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2 主要技术和工具 </a> <nav class=md-nav aria-label="2 主要技术和工具"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#20 class=md-nav__link> 2.0 环境配置 </a> </li> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1 前端技术点 </a> <nav class=md-nav aria-label="2.1 前端技术点"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#211-react class=md-nav__link> 2.1.1 前端框架 React </a> </li> <li class=md-nav__item> <a href=#212-ui class=md-nav__link> 2.1.2 UI 组件库 </a> </li> <li class=md-nav__item> <a href=#213 class=md-nav__link> 2.1.3 状态管理 </a> </li> <li class=md-nav__item> <a href=#214 class=md-nav__link> 2.1.4 移动端 </a> </li> <li class=md-nav__item> <a href=#215 class=md-nav__link> 2.1.5 其他工具库说明 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2 后端技术点 </a> <nav class=md-nav aria-label="2.2 后端技术点"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#221 class=md-nav__link> 2.2.1 服务器 </a> </li> <li class=md-nav__item> <a href=#222 class=md-nav__link> 2.2.2 第三方库 </a> </li> <li class=md-nav__item> <a href=#223 class=md-nav__link> 2.2.3 参考链接 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3 数据库设计 </a> </li> <li class=md-nav__item> <a href=#24 class=md-nav__link> 2.4 测试 </a> </li> <li class=md-nav__item> <a href=#25 class=md-nav__link> 2.5 项目文件架构说明 </a> <nav class=md-nav aria-label="2.5 项目文件架构说明"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#251 class=md-nav__link> 2.5.1 整体结构 </a> </li> <li class=md-nav__item> <a href=#252 class=md-nav__link> 2.5.2 前端结构 </a> </li> <li class=md-nav__item> <a href=#253 class=md-nav__link> 2.5.3 后端结构 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3 开发过程 </a> <nav class=md-nav aria-label="3 开发过程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31 class=md-nav__link> 3.1 开发问题及解决 </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> 3.2 更新日志 </a> <nav class=md-nav aria-label="3.2 更新日志"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#012023-01-14 class=md-nav__link> 0.1（2023-01-14） </a> </li> <li class=md-nav__item> <a href=#022023-01-21 class=md-nav__link> 0.2（2023-01-21） </a> </li> <li class=md-nav__item> <a href=#032023-01-30 class=md-nav__link> 0.3（2023-01-30） </a> </li> <li class=md-nav__item> <a href=#042023-02-02 class=md-nav__link> 0.4（2023-02-02） </a> </li> <li class=md-nav__item> <a href=#052023-02-09 class=md-nav__link> 0.5（2023-02-09） </a> </li> <li class=md-nav__item> <a href=#062023-02-16 class=md-nav__link> 0.6（2023-02-16） </a> </li> <li class=md-nav__item> <a href=#072023-03-09 class=md-nav__link> 0.7（2023-03-09） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#33-api class=md-nav__link> 3.3 API </a> <nav class=md-nav aria-label="3.3 API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#localapiinitserver class=md-nav__link> localAPI.init(server,) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapichecknet class=md-nav__link> localAPI.checkNet() ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiloginemail-password-object class=md-nav__link> localAPI.login(email, password) ⇒ object </a> </li> <li class=md-nav__item> <a href=#localapigetusers-array class=md-nav__link> localAPI.getUsers() ⇒ array </a> </li> <li class=md-nav__item> <a href=#localapigetuserinfoemail class=md-nav__link> localAPI.getUserInfo(email) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiadduseremail-name-password class=md-nav__link> localAPI.addUser(email, name, password) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapideleteuseremail class=md-nav__link> localAPI.deleteUser(email) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiupdateuserpasswordpassword-user class=md-nav__link> localAPI.updateUserPassword(password, user) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiupdateuseravataravatar-user class=md-nav__link> localAPI.updateUserAvatar(avatar, user) ⇒ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4 总结 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 致谢 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> v1 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=v1 data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> v1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../v1/00-introduction/ class=md-nav__link> 00-introduction </a> </li> <li class=md-nav__item> <a href=../../v1/1.0-future/ class=md-nav__link> 1.0-feature.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.0-env/ class=md-nav__link> 2.0-env.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.1-frontend/ class=md-nav__link> 2.1-frontend.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.2-backend/ class=md-nav__link> 2.2-backend.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.3-db/ class=md-nav__link> 2.3-db.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.4-test/ class=md-nav__link> 2.4-test.md </a> </li> <li class=md-nav__item> <a href=../../v1/2.5-structure/ class=md-nav__link> 2.5-structure.md </a> </li> <li class=md-nav__item> <a href=../../v1/3.1-issues/ class=md-nav__link> 3.1-issues.md </a> </li> <li class=md-nav__item> <a href=../../v1/3.2-change/ class=md-nav__link> 3.2-change.md </a> </li> <li class=md-nav__item> <a href=../../v1/3.3-api/ class=md-nav__link> 3.3-api.md </a> </li> <li class=md-nav__item> <a href=../../v1/9.0-docs/ class=md-nav__link> 全部文档 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> 模板 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=模板 data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 模板 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../template/different/ class=md-nav__link> different </a> </li> <li class=md-nav__item> <a href=../../template/implementation/ class=md-nav__link> implementation </a> </li> <li class=md-nav__item> <a href=../../template/produce/ class=md-nav__link> produce </a> </li> <li class=md-nav__item> <a href=../../template/technology/ class=md-nav__link> technology </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> 实现文档 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=实现文档 data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 实现文档 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../implementation/article-data-structure/ class=md-nav__link> article-data-structure </a> </li> <li class=md-nav__item> <a href=../../implementation/browser-local-storage/ class=md-nav__link> browser-local-storage </a> </li> <li class=md-nav__item> <a href=../../implementation/page-style-data-type/ class=md-nav__link> page-style-data-type </a> </li> <li class=md-nav__item> <a href=../../implementation/reader-mode/ class=md-nav__link> reader-mode </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#0 class=md-nav__link> 0 前言 </a> </li> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1 软件功能 </a> <nav class=md-nav aria-label="1 软件功能"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11 class=md-nav__link> 1.1 离线模式 </a> </li> <li class=md-nav__item> <a href=#12 class=md-nav__link> 1.2 在线模式 </a> </li> <li class=md-nav__item> <a href=#13 class=md-nav__link> 1.3 细节功能 </a> </li> <li class=md-nav__item> <a href=#14 class=md-nav__link> 1.4 未来功能展望 </a> <nav class=md-nav aria-label="1.4 未来功能展望"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#141 class=md-nav__link> 1.4.1 前端功能扩展 </a> </li> <li class=md-nav__item> <a href=#142 class=md-nav__link> 1.4.2 后端功能扩展 </a> </li> <li class=md-nav__item> <a href=#143 class=md-nav__link> 1.4.3 产品功能调研 </a> </li> <li class=md-nav__item> <a href=#144 class=md-nav__link> 1.4.4 大数据和推荐功能扩展 </a> </li> <li class=md-nav__item> <a href=#145 class=md-nav__link> 1.4.5 用户调研和反馈 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2 主要技术和工具 </a> <nav class=md-nav aria-label="2 主要技术和工具"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#20 class=md-nav__link> 2.0 环境配置 </a> </li> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1 前端技术点 </a> <nav class=md-nav aria-label="2.1 前端技术点"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#211-react class=md-nav__link> 2.1.1 前端框架 React </a> </li> <li class=md-nav__item> <a href=#212-ui class=md-nav__link> 2.1.2 UI 组件库 </a> </li> <li class=md-nav__item> <a href=#213 class=md-nav__link> 2.1.3 状态管理 </a> </li> <li class=md-nav__item> <a href=#214 class=md-nav__link> 2.1.4 移动端 </a> </li> <li class=md-nav__item> <a href=#215 class=md-nav__link> 2.1.5 其他工具库说明 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2 后端技术点 </a> <nav class=md-nav aria-label="2.2 后端技术点"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#221 class=md-nav__link> 2.2.1 服务器 </a> </li> <li class=md-nav__item> <a href=#222 class=md-nav__link> 2.2.2 第三方库 </a> </li> <li class=md-nav__item> <a href=#223 class=md-nav__link> 2.2.3 参考链接 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3 数据库设计 </a> </li> <li class=md-nav__item> <a href=#24 class=md-nav__link> 2.4 测试 </a> </li> <li class=md-nav__item> <a href=#25 class=md-nav__link> 2.5 项目文件架构说明 </a> <nav class=md-nav aria-label="2.5 项目文件架构说明"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#251 class=md-nav__link> 2.5.1 整体结构 </a> </li> <li class=md-nav__item> <a href=#252 class=md-nav__link> 2.5.2 前端结构 </a> </li> <li class=md-nav__item> <a href=#253 class=md-nav__link> 2.5.3 后端结构 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3 开发过程 </a> <nav class=md-nav aria-label="3 开发过程"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31 class=md-nav__link> 3.1 开发问题及解决 </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> 3.2 更新日志 </a> <nav class=md-nav aria-label="3.2 更新日志"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#012023-01-14 class=md-nav__link> 0.1（2023-01-14） </a> </li> <li class=md-nav__item> <a href=#022023-01-21 class=md-nav__link> 0.2（2023-01-21） </a> </li> <li class=md-nav__item> <a href=#032023-01-30 class=md-nav__link> 0.3（2023-01-30） </a> </li> <li class=md-nav__item> <a href=#042023-02-02 class=md-nav__link> 0.4（2023-02-02） </a> </li> <li class=md-nav__item> <a href=#052023-02-09 class=md-nav__link> 0.5（2023-02-09） </a> </li> <li class=md-nav__item> <a href=#062023-02-16 class=md-nav__link> 0.6（2023-02-16） </a> </li> <li class=md-nav__item> <a href=#072023-03-09 class=md-nav__link> 0.7（2023-03-09） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#33-api class=md-nav__link> 3.3 API </a> <nav class=md-nav aria-label="3.3 API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#localapiinitserver class=md-nav__link> localAPI.init(server,) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapichecknet class=md-nav__link> localAPI.checkNet() ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiloginemail-password-object class=md-nav__link> localAPI.login(email, password) ⇒ object </a> </li> <li class=md-nav__item> <a href=#localapigetusers-array class=md-nav__link> localAPI.getUsers() ⇒ array </a> </li> <li class=md-nav__item> <a href=#localapigetuserinfoemail class=md-nav__link> localAPI.getUserInfo(email) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiadduseremail-name-password class=md-nav__link> localAPI.addUser(email, name, password) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapideleteuseremail class=md-nav__link> localAPI.deleteUser(email) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiupdateuserpasswordpassword-user class=md-nav__link> localAPI.updateUserPassword(password, user) ⇒ </a> </li> <li class=md-nav__item> <a href=#localapiupdateuseravataravatar-user class=md-nav__link> localAPI.updateUserAvatar(avatar, user) ⇒ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4 总结 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 致谢 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Novel-Reader/Novel-Reader.github.io/edit/master/docs/latest/9.0-docs.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=_1>原神主题小说阅读器设计与实现<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <h2 id=0>0 前言<a class=headerlink href=#0 title="Permanent link">&para;</a></h2> <p>当前很多小说阅读器，支持用户定制的样式很少，背景色缺少，不是很方便阅读。</p> <p>我个人喜欢阅读小说，并且希望有丰富的背景和自定义样式，所以尝试自己实现了一个简单的小说阅读器，支持丰富的原神背景主题，支持用户高度定制阅读界面，同时有简单的服务器搜索，用户管理等基本功能，以搭配前端阅读器使用，同时也熟悉巩固各种技术等。</p> <p>正好 2023 年春节期间有时间，差不多前后用2个月时间，完成了这个小项目的 1.0 版本。</p> <p>关键词：React；MySQL；Express；ReactStrap；Genshin</p> <h2 id=1>1 软件功能<a class=headerlink href=#1 title="Permanent link">&para;</a></h2> <h3 id=11>1.1 离线模式<a class=headerlink href=#11 title="Permanent link">&para;</a></h3> <p>核心功能是纯文本小说阅读应用，包括用户上传小说，分章节视图，分页面视图，自定义页面样式（文字颜色，文字粗细，整体色调，背景颜色），支持了很多可爱的卡通背景图片。</p> <p>整体界面左中右布局</p> <p>左侧导航栏：支持本地上传，或者在线搜索文档，并以列表形式展示；另一个 tab 是不同章节的树状图展示</p> <p>中间阅读栏：预览模式（全页模式，分页模式，全屏模式）</p> <p>右侧设置栏：可以切换 tab，分别是基本设置和高级设置</p> <p><img alt src=../../screenshots/0.7-06.png></p> <h3 id=12>1.2 在线模式<a class=headerlink href=#12 title="Permanent link">&para;</a></h3> <p>在离线模式基础上，1.0 版本支持用户操作：用户登录，用户注册，后台管理等功能；支持小说操作：在线搜索小说，下载小说，上传小说等功能。</p> <p><img alt src=../../screenshots/0.7-05.png></p> <h3 id=13>1.3 细节功能<a class=headerlink href=#13 title="Permanent link">&para;</a></h3> <p>左侧切换大纲和分页，右侧设置基本样式和阅读模式。</p> <p><img alt src=../../screenshots/0.5-05.png></p> <p>设置栏可以支持拖动改变宽度，效果如下</p> <p><img alt src=../../screenshots/0.2-06.gif></p> <p>点击下方派蒙，可以返回到顶部</p> <p><img alt src=../../screenshots/0.3-01.gif></p> <p>不同主题原神主题色系</p> <p><img alt src=../../screenshots/0.2-04.png></p> <p>支持本地上传到数据库</p> <p><img alt src=../../screenshots/0.7-01.png></p> <p>支持初步用户登录和验证</p> <p><img alt src=../../screenshots/0.5-02.png></p> <p>支持全屏模式和快捷键阅读</p> <p><img alt src=../../screenshots/0.2-05.png></p> <p>支持不同权限管理</p> <p><img alt src=../../screenshots/0.2-03.png></p> <p>其他具体实现和项目排期比较多，所以放在线上了</p> <p>链接：<a href=https://cloud.seatable.cn/dtable/external-links/7995693695bc430db4f3/ >https://cloud.seatable.cn/dtable/external-links/7995693695bc430db4f3/</a></p> <h3 id=14>1.4 未来功能展望<a class=headerlink href=#14 title="Permanent link">&para;</a></h3> <p>这里是表格中待完成任务列举出来</p> <h4 id=141>1.4.1 前端功能扩展<a class=headerlink href=#141 title="Permanent link">&para;</a></h4> <p>[前端] 报错信息优化</p> <p>[前端] 背景水印</p> <p>[前端] 本地存储阅读记录</p> <p>[前端] 登录页面单页面</p> <p>[前端] 支持多页面</p> <p>[前端] 分页分章节</p> <p>[前端] 付费界面改进</p> <p>[前端] 界面按钮组件主题色统一</p> <p>[前端] 使用帮助</p> <p>[前端] 大文件性能问题</p> <p>[前端] 支持多语言切换</p> <p>[前端] 支持图片验证码</p> <p>[前端] 左侧侧边栏支持隐藏</p> <p>[前端] 左侧支持搜索</p> <p>[前端] React hooks 优化全部的类组件</p> <p>[前端] react-redux 或者 mobx 实现状态管理</p> <p>[前端] token 存储在本地</p> <p>[前端] TS 语言重构项目</p> <p>[前端] VUE 语言重构项目</p> <h4 id=142>1.4.2 后端功能扩展<a class=headerlink href=#142 title="Permanent link">&para;</a></h4> <p>[后端] 代码分离</p> <p>[后端] 服务器性能问题</p> <p>[后端] 搜索逻辑优化</p> <p>[后端] 微信扫码登录</p> <p>[后端] 下载次数和时间统计</p> <p>[后端] 用户密码数据库加密</p> <p>[后端] express 框架构建</p> <p>[后端] express 优化</p> <p>[后端] flask 框架重构项目</p> <h4 id=143>1.4.3 产品功能调研<a class=headerlink href=#143 title="Permanent link">&para;</a></h4> <p>[产品] 调研其他产品的界面</p> <p>[产品] 界面统计</p> <p>[产品] 云服务器调研</p> <p>[产品] 支持不同版本</p> <p>[产品] 支持导出</p> <p>[产品] 支持导入导出 pdf</p> <p>[产品] 支持二维码分享</p> <p>[产品] 支持付费功能</p> <p>[产品] 支持移动端界面</p> <p>如果是离线状态，打开对话框，提示”网络连接失败，以离线模式进行预览“。如果是在线状态，打开对话框，提示”用户登录或注册“，如果登录不正常，就是游客模式。如果登录正常，根据数据库判断，是免费版本，还是 VIP 账户，还是 admin 账户。</p> <p>模式和权限列表，目前支持离线模式，免费模式。</p> <table> <thead> <tr> <th>模式</th> <th>字段</th> <th>网络状态</th> <th>登录状态</th> <th>本地上传</th> <th>小说数量</th> <th>在线查询</th> <th>高级设置</th> <th>用户管理</th> </tr> </thead> <tbody> <tr> <td>离线模式</td> <td>offline</td> <td>断网</td> <td>未登录</td> <td>√</td> <td>3</td> <td>x</td> <td>x</td> <td>x</td> </tr> <tr> <td>游客模式</td> <td>tourist</td> <td>联网</td> <td>未登录</td> <td>√</td> <td>3</td> <td>x</td> <td>x</td> <td>x</td> </tr> <tr> <td>免费模式</td> <td>free</td> <td>联网</td> <td>已登录</td> <td>√</td> <td>10</td> <td>x</td> <td>x</td> <td>x</td> </tr> <tr> <td>VIP 模式</td> <td>vip</td> <td>联网</td> <td>已登录</td> <td>√</td> <td>不限</td> <td>√</td> <td>√</td> <td>x</td> </tr> <tr> <td>管理</td> <td>admin</td> <td>联网</td> <td>已登录</td> <td>√</td> <td>不限</td> <td>√</td> <td>√</td> <td>√</td> </tr> </tbody> </table> <h4 id=144>1.4.4 大数据和推荐功能扩展<a class=headerlink href=#144 title="Permanent link">&para;</a></h4> <p>[后端] 根据用户阅读列表，使用推荐算法，给用户推荐想要的小说</p> <h4 id=145>1.4.5 用户调研和反馈<a class=headerlink href=#145 title="Permanent link">&para;</a></h4> <p>[测试] 全部功能样式测试</p> <p>[文档] 完善使用文档</p> <p>[文档] 注释分支</p> <p>[运营] 线上反馈</p> <p>限于时间和精力，第一版目前先做到这里，后续再完善其他功能</p> <h2 id=2>2 主要技术和工具<a class=headerlink href=#2 title="Permanent link">&para;</a></h2> <h3 id=20>2.0 环境配置<a class=headerlink href=#20 title="Permanent link">&para;</a></h3> <p>本章节介绍在开发过程中所应用到的主要技术和环境需求：</p> <p>操作系统：MacOS 12.4</p> <p>硬件配置：8G 内存 + 256G 硬盘</p> <p>开发环境：服务器 nodejs 19.0.1 浏览器 Google Chrome 110.0</p> <p>开发语言：Javascript</p> <p>开发框架：React 18</p> <p>开发工具：Visual Studio Code 1.76.1</p> <p>网络工具：Postman Version 10.9.4</p> <p>数据库：Mysql</p> <p>数据库管理工具：Table plus Version 5.3.4</p> <p>设计工具：及时设计 <a href=https://ad.js.design/special/sketch/ >https://ad.js.design/special/sketch/</a> </p> <p>产品工具：墨刀工具 <a href=https://modao.cc/app/design/pblctvmjxgcwolda?>https://modao.cc/app/design/pblctvmjxgcwolda?</a> </p> <p>图标工具：阿里巴巴图标库：<a href=https://www.iconfont.cn/collections/index>https://www.iconfont.cn/collections/index</a> </p> <p>图标工具：iconmoon图标库：<a href=https://icomoon.io/#icons-icomoon>https://icomoon.io/#icons-icomoon</a></p> <p>2.1 <a href=../2.1-frontend/ >前端技术</a></p> <h3 id=21>2.1 前端技术点<a class=headerlink href=#21 title="Permanent link">&para;</a></h3> <h4 id=211-react>2.1.1 前端框架 React<a class=headerlink href=#211-react title="Permanent link">&para;</a></h4> <p>本项目使用 React 18 版本，React 主要用于数据展示到界面。</p> <h4 id=212-ui>2.1.2 UI 组件库<a class=headerlink href=#212-ui title="Permanent link">&para;</a></h4> <p>本项目使用 reactstrap 作为 UI 组件库，样式主题色引用 bootstrap 的样式，具体版本如下。</p> <div class=highlight><pre><span></span><code>&quot;bootstrap&quot;: &quot;^5.2.3&quot;,
&quot;reactstrap&quot;: &quot;^9.1.5&quot;,
</code></pre></div> <p>reactstrap 组件库和 bootstrap 组件库样式类似，且和 react 框架结合良好，日常使用较多，API 和配置较熟悉，所以选择这个作为组件库，减少了从零开始写 UI 组件消耗的时间成本。</p> <h4 id=213>2.1.3 状态管理<a class=headerlink href=#213 title="Permanent link">&para;</a></h4> <p>1、小说内容数据：支持本地上传，或者从服务器搜索加载两种模式。离线模式可以本地上传，上传后以 state 形式保存在 app 中。在线模式中，支持从服务器中查找小说并加载，可以把本地小说上传到服务器。</p> <p>2、界面样式数据：支持自定义背景图片，背景色，字号，字体，文字颜色，行间隔，保存本地在浏览器存储中。</p> <p>3、阅读模式数据：模式分为全屏模式、分页模式、章节模式，适合不同类型的小说或者阅读者的需求，界面渲染不同模式的组件。</p> <p>因为项目数据不复杂，目前使用 React state 进行数据管理，没有使用额外的数据管理库（redux 或者 mobx），未来考虑使用 context、mobx 或 redux 进行状态管理。</p> <h4 id=214>2.1.4 移动端<a class=headerlink href=#214 title="Permanent link">&para;</a></h4> <p>目前使用 react-responsive 实现移动端媒体查询，具体移动端 UI 效果和功能待实现。</p> <h4 id=215>2.1.5 其他工具库说明<a class=headerlink href=#215 title="Permanent link">&para;</a></h4> <p>本项目还使用了其他第三方工具库，简介如下：</p> <div class=highlight><pre><span></span><code>&quot;axios&quot;: &quot;^1.2.2&quot; 发送网络请求
&quot;classnames&quot;: &quot;^2.3.2&quot;, 处理css类名
&quot;deep-copy&quot;: &quot;^1.4.2&quot;, 深拷贝对象
&quot;is-hotkey&quot;: &quot;^0.2.0&quot;, 键盘快捷键
&quot;lodash&quot;: &quot;^4.17.21&quot;, 扩展JS方法
&quot;react-color&quot;: &quot;^2.19.3&quot;, 自定义颜色选择器
&quot;react-router-dom&quot;: &quot;^6.8.1&quot;, 浏览器界面路由
&quot;react-scripts&quot;: &quot;5.0.1&quot;, react开发脚本工具
&quot;react-select&quot;: &quot;^5.7.0&quot;, 选择框组件
&quot;react-sweet-progress&quot;: &quot;^1.1.2&quot;, 进度条组件
&quot;react-transition-group&quot;: &quot;^4.4.5&quot;, 动画效果组件
</code></pre></div> <p>构建打包工具是 webpack，集成在 react-scripts 库中</p> <div class=highlight><pre><span></span><code>// babel es6 转换器
&quot;@babel/cli&quot;: &quot;^7.5.0&quot;,
&quot;@babel/core&quot;: &quot;^7.5.0&quot;,
&quot;@babel/node&quot;: &quot;^7.5.0&quot;,
&quot;@babel/plugin-proposal-class-properties&quot;: &quot;7.14.5&quot;,
&quot;@babel/plugin-transform-modules-commonjs&quot;: &quot;^7.5.0&quot;,
&quot;@babel/plugin-transform-runtime&quot;: &quot;^7.8.3&quot;,
&quot;@babel/preset-env&quot;: &quot;^7.5.0&quot;,
&quot;@babel/register&quot;: &quot;^7.4.4&quot;,
&quot;@babel/runtime&quot;: &quot;^7.8.3&quot;,
&quot;babel-eslint&quot;: &quot;10.1.0&quot;,
&quot;babel-jest&quot;: &quot;27.0.2&quot;,
&quot;babel-loader&quot;: &quot;8.2.2&quot;,
&quot;babel-register&quot;: &quot;^6.26.0&quot;,

// 代码格式检查工具
&quot;eslint&quot;: &quot;^7.32.0&quot;,
&quot;eslint-config-airbnb-base&quot;: &quot;14.2.1&quot;,
&quot;eslint-plugin-import&quot;: &quot;2.25.2&quot;,

&quot;form-data&quot;: &quot;^2.5.1&quot;, APIpost表单数据工具
&quot;jsdoc-to-markdown&quot;: &quot;^7.1.1&quot; 自动生成文档工具
&quot;localforage&quot;: &quot;^1.10.0&quot;, 前端存储工具
&quot;match-sorter&quot;: &quot;^6.3.1&quot;, 数组处理工具
&quot;multer&quot;: &quot;^1.4.5-lts.1&quot;,
&quot;glamor&quot;: &quot;^2.20.40&quot;,
&quot;sort-by&quot;: &quot;^1.2.0&quot;,
&quot;web-vitals&quot;: &quot;^2.1.4&quot;
</code></pre></div> <p>2.2 <a href=../2.2-backend/ >后端技术</a></p> <h3 id=22>2.2 后端技术点<a class=headerlink href=#22 title="Permanent link">&para;</a></h3> <h4 id=221>2.2.1 服务器<a class=headerlink href=#221 title="Permanent link">&para;</a></h4> <p>使用 express 作为后端，目前仅考虑基本的 RestAPI 请求，不考虑性能问题（高并发，负载均衡）。</p> <div class=highlight><pre><span></span><code>&quot;express&quot;: &quot;^4.18.2&quot;,
</code></pre></div> <h4 id=222>2.2.2 第三方库<a class=headerlink href=#222 title="Permanent link">&para;</a></h4> <ul> <li>body-parser - node.js 中间件，用于处理 JSON, Raw, Text 和 URL 编码的数据</li> <li>cookie-parser - 解析 Cookie 的工具。通过req.cookies可以取到传过来的cookie，并把它们转成对象</li> <li>multer - node.js 中间件，用于处理 enctype="multipart/form-data"（设置表单的MIME编码）的表单数据</li> <li>"log4js": "^6.7.1", 日志记录工具</li> <li>"jsonwebtoken": "^9.0.0", 处理 JWT 工具库</li> <li>"express-jwt": "^8.4.1", 处理 express jwt 工具库</li> </ul> <h4 id=223>2.2.3 参考链接<a class=headerlink href=#223 title="Permanent link">&para;</a></h4> <p>express 官方文档：<a href=https://www.expressjs.com.cn/starter/hello-world.html>https://www.expressjs.com.cn/starter/hello-world.html</a></p> <p>express 基本使用：<a href=https://michael18811380328.github.io/backend/site/nodejs/20-Node.js%20Express%20%E6%A1%86%E6%9E%B6/ >https://michael18811380328.github.io/backend/site/nodejs/20-Node.js%20Express%20%E6%A1%86%E6%9E%B6/</a></p> <h3 id=23>2.3 数据库设计<a class=headerlink href=#23 title="Permanent link">&para;</a></h3> <p>一个新开发的程序，需要有数据库的配合。MySQL是一种关系数据库管理系统，它最明显的机制就是将有关联的数据各个建表，多个表格通过不同的MySQL语句实现对数据的增删改查，几个表格在一起相辅相成，分工明确。整体条理清晰，加快了速度并且提高了灵活性。</p> <p>这里使用 MySQL 数据库，版本为 "mysql": "^2.18.1"，实现基本的增删改查，目前不考虑性能安全等问题。</p> <p>本地需要新建数据库，数据库名：novel，新建数据库表1-用户表，数据库表2-书籍表，具体建表语句参考</p> <div class=highlight><pre><span></span><code>mysqldump -u root -proot --skip-add-locks --skip-add-drop-table --skip-comments novel  &gt; sql/mysql.sql
</code></pre></div> <p>参考链接</p> <p>nodejs 连接 mysql: <a href=https://michael18811380328.github.io/backend/site/nodejs/24-Node.js%20%E8%BF%9E%E6%8E%A5%20MySQL/ >https://michael18811380328.github.io/backend/site/nodejs/24-Node.js%20%E8%BF%9E%E6%8E%A5%20MySQL/</a></p> <p>tablePlus 数据库软件连接本地 mysql：<a href=https://blog.csdn.net/weixin_41697143/article/details/119904196>https://blog.csdn.net/weixin_41697143/article/details/119904196</a></p> <h3 id=24>2.4 测试<a class=headerlink href=#24 title="Permanent link">&para;</a></h3> <p>软件测试的目的主要是发现软件缺陷和漏洞，其次，软件测试能够识别图书风险。为开发人员和程序经理提供软件测试的反馈结果，为风险评估提供必要的信息。再者，软件测试确保在上线日前达到上线标准。包括持续追踪图书进度和严格把控各个开发阶段的产品质量。</p> <p>本地使用 Jest 实现前端单元测试；因为功能在不断完善中，目前只完成工具函数的单元测试，没有处理 React 组件的镜像测试，E2E 测试等，使用如下的测试工具和版本号。</p> <div class=highlight><pre><span></span><code>&quot;@testing-library/jest-dom&quot;: &quot;^5.16.5&quot;,
&quot;@testing-library/react&quot;: &quot;^13.4.0&quot;,
&quot;@testing-library/user-event&quot;: &quot;^13.5.0&quot;,
</code></pre></div> <p>未来有需要再完成 api 和组件的测试。</p> <h3 id=25>2.5 项目文件架构说明<a class=headerlink href=#25 title="Permanent link">&para;</a></h3> <h4 id=251>2.5.1 整体结构<a class=headerlink href=#251 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code>├── README.md
├── backend 后端代码
├── dist 打包后的后端文件
├── build 打包后的前端代码
├── docs 文档
├── example 案例
├── img 图片资源
├── node_modules 第三方依赖
├── novel-server.log 后端日志
├── public 公共文件
└── src 前端代码
</code></pre></div> <h4 id=252>2.5.2 前端结构<a class=headerlink href=#252 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code>├── App.js 项目主文件
├── api 接口
│   └── local-api.js
├── common 公共组件
│   ├── icons
│   ├── scroll-top-button
│   ├── vip-button
│   └── vip-dialog
├── css 公共样式
│   ├── App.css
│   ├── common.css
│   └── font.css
├── index.js 入口文件
├── main 主页
│   ├── folded-icon 折叠设置栏图标
│   ├── long-page 长页面展示
│   └── short-page 分页展示
├── navs 左侧导航栏
│   ├── add-novel-dialog
│   │   ├── load-from-local
│   │   └── load-from-server
│   ├── nav-body
│   ├── nav-footer
│   └── nav-header
├── settings 右侧设置栏
│   ├── advance-settings 高级设置
│   │   ├── advance-theme-settings
│   │   ├── color-settings
│   │   ├── font-settings
│   ├── basic-settings 基本设置
│   │   ├── font-settings
│   │   └── theme-settings
│   ├── constants.js
├── test 单元测试
└── utils 工具函数
    ├── example.json 实例小说文件
    └── index.js
</code></pre></div> <h4 id=253>2.5.3 后端结构<a class=headerlink href=#253 title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code>├── app.js 入口文件
├── connect.js 功能函数（暂不支持）
├── db-helper.js 数据库函数
├── http-server.js 后端路由
├── logger.js 日志函数
└── sql
    └── mysql.sql 数据库文件
</code></pre></div> <h2 id=3>3 开发过程<a class=headerlink href=#3 title="Permanent link">&para;</a></h2> <h3 id=31>3.1 开发问题及解决<a class=headerlink href=#31 title="Permanent link">&para;</a></h3> <ul> <li>某些 css 文件不生效：检查文件路径没有问题。把这部分代码拷贝到其他能用的代码中，不生效，检查是类名写错了。</li> <li>reactstrap 样式不生效：没有引入 bootstrap.min.css 类</li> <li>请求跨域：前端和后端端口号不一致，目前后端设置允许跨域</li> </ul> <div class=highlight><pre><span></span><code><span class=nx>app</span><span class=p>.</span><span class=nx>all</span><span class=p>(</span><span class=s2>&quot;*&quot;</span><span class=p>,</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=p>(</span><span class=nx>req</span><span class=p>,</span><span class=w> </span><span class=nx>res</span><span class=p>,</span><span class=w> </span><span class=nx>next</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s2>&quot;Access-Control-Allow-Origin&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;*&quot;</span><span class=p>);</span><span class=w> </span><span class=c1>// 允许跨域</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s2>&quot;Access-Control-Allow-Headers&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;content-type&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s2>&quot;Access-Control-Allow-Methods&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;DELETE,PUT,POST,GET,OPTIONS&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>method</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s1>&#39;OPTIONS&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>res</span><span class=p>.</span><span class=nx>sendStatus</span><span class=p>(</span><span class=mf>200</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>next</span><span class=p>();</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>});</span>
</code></pre></div> <ul> <li>数据库端口号冲突：默认 mysql 的端口号是 3306 端口，如果本地装有多个 mysql 数据库，例如 docker 内部也跑的一个，可能造成另一个无法正常启动。实际环境中不可能有两个 mysql 在不同的端口跑。所以可以本地只开发一个项目，或者临时改一下数据库的端口号等。</li> <li>node 不支持 ES6 语法：运行服务前，需要用 babel 编译成 es5 后才能执行</li> <li>发送请求时，数据库报错：错误日志如下，报错是服务器返回了多个响应，应该返回一个值 res.send(data)，然后 return 参考：<a href=https://blog.csdn.net/qq_48009509/article/details/121625588>https://blog.csdn.net/qq_48009509/article/details/121625588</a></li> </ul> <p><div class=highlight><pre><span></span><code>/novel-reader/node_modules/mysql/lib/protocol/Parser.js:437
throw err; // Rethrow non-MySQL errors
Error: Cannot set headers after they are sent to the client at new NodeError (node:internal/errors:393:5)
</code></pre></div> - 数据库存储小说会不会太长：查阅数据库资料，logntext 字段的长度足够长，存放一个 10MB 的小说也绰绰有余。执行查询语句时，可以不返回小说详情，先返回小说的标题等信息，这样查询的速度回更快。 - 静态资源引用路径：静态资源（图片、字体文件）是否需要打包到 JS 中？目前图片已经打包，但是字体图标没有打包，未来图片是否存在无法显示的问题等？ - 数据库分页查找：如果想加载某个章节的数据，能否从 longtext 字段中返回指定的字符串，不需要一次性返回全部的页面 - token 如何在不同页面传参：登录页面验证后，如何在不同页面传参，目前使用 url search 参数传递 token。未来考虑 session 和 单点登录等技术</p> <h3 id=32>3.2 更新日志<a class=headerlink href=#32 title="Permanent link">&para;</a></h3> <h4 id=012023-01-14>0.1（2023-01-14）<a class=headerlink href=#012023-01-14 title="Permanent link">&para;</a></h4> <ul> <li>[前端] 初始化项目前端</li> <li>[后端] 初始化项目后端</li> <li>[前端] 支持用户上传删除文件</li> <li>[前端] 支持基本设置和高级设置</li> <li>[前端] 样式存储在浏览器本地</li> <li>[产品] 调研并支持原神背景图</li> <li>[后端] 服务器多个返回值报错</li> <li>[产品] 了解墨刀工具-Xmind</li> </ul> <h4 id=022023-01-21>0.2（2023-01-21）<a class=headerlink href=#022023-01-21 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.1 功能</li> <li>[前端] 上传文件详细信息完善</li> <li>[设计] 字体图标调研使用</li> <li>[前端] 预加载几个小说</li> <li>[前端] 支持专业版图标和提示</li> <li>[前端] 支持原神背景图片</li> <li>[前端] 支持原神主题色</li> <li>[前端] 支持隐藏侧栏</li> </ul> <h4 id=032023-01-30>0.3（2023-01-30）<a class=headerlink href=#032023-01-30 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.2 功能</li> <li>[修复] 修复线上字体图标不显示问题，上传本地文件问题</li> <li>[前端] 支持回到顶部的派蒙小火箭</li> <li>[产品] 了解及时设计-Sketch</li> </ul> <h4 id=042023-02-02>0.4（2023-02-02）<a class=headerlink href=#042023-02-02 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.3 功能</li> <li>[前端] 左侧支持切换 tabs </li> <li>[前端] 支持分页视图</li> <li>[修复] 修复点击派蒙滚动速度，上传文件对话框样式，文本较少派蒙白色条问题</li> <li>[前端] 项目文件结构整理</li> <li>[前端] 使用 Eslint 规范化代码</li> </ul> <h4 id=052023-02-09>0.5（2023-02-09）<a class=headerlink href=#052023-02-09 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.4 功能</li> <li>[测试] github workflow 线上自动测试</li> <li>[产品] 用户角色调研</li> <li>[后端] 支持用户登录 API</li> <li>[前端] 用户登录界面</li> <li>[前端] 支持分章节</li> <li>[前端] 阅读模式切换（分页模式、章节模式、全屏模式）</li> </ul> <h4 id=062023-02-16>0.6（2023-02-16）<a class=headerlink href=#062023-02-16 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.5 功能</li> <li>[前端] 使用 react-router 实现多页路由（登录界面和错误界面路由）</li> <li>[前端] 支持快捷键上下翻页</li> <li>[前端] 导航栏文件树高亮样式</li> <li>[前端] 左侧文件树支持精确搜索</li> <li>[前端] toaster 错误提示优化</li> <li>[后端] 支持用户 jwt token 验证</li> </ul> <h4 id=072023-03-09>0.7（2023-03-09）<a class=headerlink href=#072023-03-09 title="Permanent link">&para;</a></h4> <ul> <li>[测试] 测试线上 0.6 功能</li> <li>[前端] react-router 封装组件</li> <li>[前端] 小说列表样式优化</li> <li>[前端] 移动端临时组件</li> <li>[前端] React 类组件改写函数组件</li> <li>[后端] 小说存储数据库</li> <li>[后端] 从数据库获取小说</li> <li>[后端] 从数据库查找小说，支持精确查询或者模糊查询</li> </ul> <h3 id=33-api>3.3 API<a class=headerlink href=#33-api title="Permanent link">&para;</a></h3> <p>LocalAPI for get data from server</p> <p><strong>Kind</strong>: global class </p> <ul> <li><a href=#LocalAPI>LocalAPI</a><ul> <li><a href=#LocalAPI+init>.init(server,)</a> ⇒</li> <li><a href=#LocalAPI+checkNet>.checkNet()</a> ⇒</li> <li><a href=#LocalAPI+login>.login(email, password)</a> ⇒ <code>object</code></li> <li><a href=#LocalAPI+getUsers>.getUsers()</a> ⇒ <code>array</code></li> <li><a href=#LocalAPI+getUserInfo>.getUserInfo(email)</a> ⇒</li> <li><a href=#LocalAPI+addUser>.addUser(email, name, password)</a> ⇒</li> <li><a href=#LocalAPI+deleteUser>.deleteUser(email)</a> ⇒</li> <li><a href=#LocalAPI+updateUserPassword>.updateUserPassword(password, user)</a> ⇒</li> <li><a href=#LocalAPI+updateUserAvatar>.updateUserAvatar(avatar, user)</a> ⇒</li> </ul> </li> </ul> <p><a name=LocalAPI+init></a></p> <h4 id=localapiinitserver>localAPI.init(server,) ⇒<a class=headerlink href=#localapiinitserver title="Permanent link">&para;</a></h4> <p>init api</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: API object </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>server,</td> <td><code>object</code></td> <td>username, password, token</td> </tr> </tbody> </table> <p><a name=LocalAPI+checkNet></a></p> <h4 id=localapichecknet>localAPI.checkNet() ⇒<a class=headerlink href=#localapichecknet title="Permanent link">&para;</a></h4> <p>check internet is connect</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: pong<br> <a name=LocalAPI+login></a></p> <h4 id=localapiloginemail-password-object>localAPI.login(email, password) ⇒ <code>object</code><a class=headerlink href=#localapiloginemail-password-object title="Permanent link">&para;</a></h4> <p>user login</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: <code>object</code> - response </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>email</td> <td><code>string</code></td> </tr> <tr> <td>password</td> <td><code>string</code></td> </tr> </tbody> </table> <p><a name=LocalAPI+getUsers></a></p> <h4 id=localapigetusers-array>localAPI.getUsers() ⇒ <code>array</code><a class=headerlink href=#localapigetusers-array title="Permanent link">&para;</a></h4> <p>get all users in dabatase</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: <code>array</code> - user list<br> <a name=LocalAPI+getUserInfo></a></p> <h4 id=localapigetuserinfoemail>localAPI.getUserInfo(email) ⇒<a class=headerlink href=#localapigetuserinfoemail title="Permanent link">&para;</a></h4> <p>get user info by email</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: user object </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>email</td> <td><code>string</code></td> </tr> </tbody> </table> <p><a name=LocalAPI+addUser></a></p> <h4 id=localapiadduseremail-name-password>localAPI.addUser(email, name, password) ⇒<a class=headerlink href=#localapiadduseremail-name-password title="Permanent link">&para;</a></h4> <p>add new user</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: boolean </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>email</td> <td><code>string</code></td> </tr> <tr> <td>name</td> <td><code>string</code></td> </tr> <tr> <td>password</td> <td><code>string</code></td> </tr> </tbody> </table> <p><a name=LocalAPI+deleteUser></a></p> <h4 id=localapideleteuseremail>localAPI.deleteUser(email) ⇒<a class=headerlink href=#localapideleteuseremail title="Permanent link">&para;</a></h4> <p>delete user by email</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: boolean </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>email</td> <td><code>string</code></td> </tr> </tbody> </table> <p><a name=LocalAPI+updateUserPassword></a></p> <h4 id=localapiupdateuserpasswordpassword-user>localAPI.updateUserPassword(password, user) ⇒<a class=headerlink href=#localapiupdateuserpasswordpassword-user title="Permanent link">&para;</a></h4> <p>change user password</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: user object </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>password</td> <td><code>string</code></td> <td></td> </tr> <tr> <td>user</td> <td><code>string</code></td> <td>email</td> </tr> </tbody> </table> <p><a name=LocalAPI+updateUserAvatar></a></p> <h4 id=localapiupdateuseravataravatar-user>localAPI.updateUserAvatar(avatar, user) ⇒<a class=headerlink href=#localapiupdateuseravataravatar-user title="Permanent link">&para;</a></h4> <p>change user avatar</p> <p><strong>Kind</strong>: instance method of <a href=#LocalAPI><code>LocalAPI</code></a><br> <strong>Returns</strong>: user object </p> <table> <thead> <tr> <th>Param</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>avatar</td> <td><code>string</code></td> <td>image path</td> </tr> <tr> <td>user</td> <td><code>string</code></td> <td>email</td> </tr> </tbody> </table> <h2 id=4>4 总结<a class=headerlink href=#4 title="Permanent link">&para;</a></h2> <p>2023 年春节前有了这个想法，春节期间把主要的框架和前端功能完成，后续一个月补充了后端基本功能，完善了整体效果等，这个小说阅读器的基本效果就实现了。</p> <p>通过这个小项目，学到了很多东西，在阅读器基本功能实现基础上，增加了很多后端功能（上传下载小说，用户注册登录验证，jwt 等）。从这个小项目，基本实现了一个小项目的完整流程：</p> <ul> <li>分析需求，调研竞品特点，完成产品文档</li> <li>完成基本原型图和设计稿</li> <li>前端技术选型，搭建项目，完成细节交互</li> <li>后端技术选型，搭建基本服务</li> <li>数据库技术选型，完成 API 通信和验证</li> <li>本地测试和在线测试，并逐步迭代整个过程</li> </ul> <p>这个小项目也反映出不少的问题，一部分基础知识长期不使用，很不扎实，还需要当下查文档。自己想要的效果和实现的效果不一致。</p> <p>未来会做的工作，前端尝试使用多个技术栈完成这个小项目；利用其他状态管理工具和工程化管理工具优化当前项目；后端完全分离，使用 flask 单独构建服务。</p> <h2 id=_2>致谢<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>感谢 <a href=https://www.ruanyifeng.com/ >阮一峰</a> 老师提供的教程 <a href=https://github.com/Michael18811380328/HelloBlog/tree/main/book/docs/ebook-JS-basic>JS语言基础</a> ，<a href=https://github.com/Michael18811380328/HelloBlog/tree/main/book/docs/ebook-JSES6-RYF>JS语言ES6</a></p> <p>感谢 <a href=https://www.seatable.cn/ >Seatable</a> 提供的项目管理工具</p> <p>感谢<a href=https://github.com/Michael18811380328/HelloBlog/tree/master/book/docs/ebook-netease-senior-frontend>网易云课堂</a>提供的前端+后端学习视频</p> <p>感谢<a href=https://github.com/Michael18811380328/HelloBlog/tree/master/book/docs/ebook-network-basic>湖南科技大学</a>提供的计算机网络学习视频</p> <p>感谢<a href=https://github.com/Michael18811380328/HelloBlog/tree/master/backend/docs/backend-sql>阿里云课堂</a>提供的MYSQL学习视频</p> <p>感谢黑马程序员、<a href=https://github.com/Michael18811380328/HelloBlog/tree/master/book/docs/ebook-kaikeba-frontend>开课吧</a>、尚硅谷等机构提供的项目教学视频</p> <p>感谢 <a href=https://stackoverflow.com/users/14245047/michael-an>stackoverflow</a> 提供的外文检索平台</p> <p>感谢 <a href=https://blog.csdn.net/weixin_41697143>CSDN</a> 掘金等提供的中文检索博客平台</p> <p>感谢 <a href=https://github.com/Michael18811380328/ >github</a> 提供的代码管理平台</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../3.3-api/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 3.3-api.md" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 3.3-api.md </div> </div> </a> <a href=../../v1/00-introduction/ class="md-footer__link md-footer__link--next" aria-label="Next: 00-introduction" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> 00-introduction </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; Noella </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.8492ddcf.min.js></script> </body> </html>